var HeroRotator=function(){this._selections=function(){this.$html=$("html"),this.$heroContainer=$(".js-hero-rotator"),this.$heroSlide=$(".js-hero-rotator__slide"),this.$fullWidthContainer=$(".js-content"),this.$heroPager=$(".js-hero-pager"),this.$progressBar=$(".js-hero-pager__progress"),this.$firstSlide=$heroSlide.first(),this.$lastSlide=$heroSlide.last(),this.slideHeight=this.$heroSlide.outerHeight(!0),this.slideLength=this.$heroSlide.length,this.allSlidesHeight=this.slideLength*this.slideHeight,this.$sliderContainer=$(".carousel-banner"),this.$pageContainer=$(".page-wrapper"),this.scrolledOnLast=!1},this.config=function(){this.rateOfFade=16,this.breakpoint=1028,this.currentSlide=0,this.fadeOutHero=!1},this.calcScrollDepth=function(a){var b=a/(this.allSlidesHeight-this.slideHeight)*100;this.$progressBar.css("height",b)},this.parallaxScroll=function(){var a=$(".js-hero-rotator__slide.active"),b=window.pageYOffset,d=b-(this.allSlidesHeight-this.slideHeight),e=1-d*this.rateOfFade*1e-4,f=$(".js-hero-rotator__slide.active").last();if(this.calcScrollDepth(b),-f[0].getBoundingClientRect().top>=this.slideHeight){a.next().addClass("active");var g=$(".js-hero-rotator__slide.active").last();g.css("margin-top",50*g.index()+"vw")}f.is(":not(:first-child)")&&f[0].getBoundingClientRect().top>=0&&f.removeClass("active").css("margin-top","0px"),this.$lastSlide[0].getBoundingClientRect().top<0&&this.fadeOutHero&&this.fadeItemsOut([this.$heroPager,this.$heroContainer],e),this.$lastSlide[0].getBoundingClientRect().top>=0&&(this.$heroContainer.css("opacity",1),this.$heroPager.css("opacity",1));var h=-this.$sliderContainer[0].getBoundingClientRect().top,i=this.allSlidesHeight-this.slideHeight-100,j=-this.slideHeight;h<j?(this.$fullWidthContainer.addClass("content--rel").removeClass("content--fixed").css("margin-top",0),this.$pageContainer.css("margin-bottom","0px")):h<i?(this.$fullWidthContainer.addClass("content--fixed").removeClass("content--rel").css("margin-top",0),this.$pageContainer.css("margin-bottom",this.$fullWidthContainer.height()+"px")):(this.$fullWidthContainer.addClass("content--rel").removeClass("content--fixed").css("margin-top",50*this.slideLength+"vw"),this.$pageContainer.css("margin-bottom","0px"))},this.fadeItemsOut=function(a,b){for(i=0;i<a.length;i++)a[i].css("opacity",b)},this.afterLoadStyles=function(){this.$html.css("min-height",this.allSlidesHeight+1e3),this.$heroContainer.css({opacity:1,height:"auto"})},this.setUpParallax=function(){currentHeroContentIndex=null,parallaxScroll()},this.scrollTo=function(a){$("html, body").animate({scrollTop:a},500)},this.scrollDown=function(){slideNumber=Math.floor($(window).scrollTop()/this.slideHeight),$(window).scrollTop()<this.slideHeight*this.slideLength&&this.scrollTo((slideNumber+1)*this.slideHeight)},this.scrollUp=function(){slideNumber=Math.floor($(window).scrollTop()/this.slideHeight),$(window).scrollTop()>0&&this.scrollTo((slideNumber-1)*this.slideHeight)},this.bind=function(){self=this,$(window).on("scroll",_.throttle(this.parallaxScroll,30)),$(".js-hero-pager--down").click(function(){self.scrollDown()}),$(".js-hero-pager--up").click(function(){self.scrollUp()})},this.init=function(){this._selections(),this.config(),this.bind(),this.afterLoadStyles(),this.setUpParallax()},this.init()};$(function(){$(".js-hero-rotator").length&&HeroRotator()});